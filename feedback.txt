ì—ëŸ¬ë°”ìš´ë”ë¦¬ë„ ì˜ ë§Œë“¤ì–´ì„œ ì ìš©í•´ì£¼ì‹  ê±¸ë¡œ ë³´ì´ê³ , hookë„ ì•Œë§ê²Œ ë¶„ë¦¬í•´ì„œ ì „ë°˜ì ìœ¼ë¡œ ì½”ë“œê°€ ê¹”ë”í•˜ê²Œ ì˜ ë§Œë“¤ì–´ì£¼ì‹  ê²ƒ ê°™ì•„ í•´ë‹¹ PRì€ ë°”ë¡œ ë¨¸ì§€í•˜ê² ìŠµë‹ˆë‹¤!
ë‹¤ë§Œ eol ì´ìŠˆë§Œ ì¡°ê¸ˆ ì±™ê²¨ì£¼ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ì•„ìš”!
ê³ ìƒí•˜ì…¨ìŠµë‹ˆë‹¤~

In src/hooks/useToggleProductWishMutation.ts:

> @@ -0,0 +1,37 @@
+import { useMutation, useQueryClient } from '@tanstack/react-query';
+import { toggleProductWish } from '@/api/product';
+import { ProductWish } from '@/types/product';
+import { toast } from 'react-toastify';
+
+export const useToggleProductWishMutation = (productId: number) => {
+  const queryClient = useQueryClient();
+
+  return useMutation<void, Error, void, { previousWish: ProductWish | undefined }>({ 
+    mutationFn: () => toggleProductWish(productId),
+    onMutate: async () => {
+      await queryClient.cancelQueries({ queryKey: ['productWish', productId] });
ğŸ‘

In src/pages/ProductDetailPage.tsx:

> +        <ReviewSection>
+          <SectionTitle>í•˜ì´ë¼ì´íŠ¸ ë¦¬ë·° ({reviews?.totalCount.toLocaleString()})</SectionTitle>
+          {reviews?.reviews.map((review) => (
+            <ReviewItem key={review.id}>
+              <ReviewAuthor>{review.authorName}</ReviewAuthor>
+              <ReviewContent>{review.content}</ReviewContent>
+            </ReviewItem>
+          ))}
+        </ReviewSection>
reviews ê°€ ì—†ëŠ” ê²½ìš°ëŠ” ì¡°ê±´ë¶€ ì²˜ë¦¬í•´ì¤˜ë„ ì¢‹ì„ ê²ƒ ê°™ë„¤ìš¥!

In src/hooks/useProductDetailQuery.ts:

> +    queryFn: async () => {
+      const [summary, detail] = await Promise.all([
+        getProductSummary(productId),
+        getProductDetail(productId),
+      ]);
+      return { ...summary, ...detail };
+    },
+    enabled: !!productId,
+    meta: { 
+      onError: (error: Error) => {
+        console.error('ìƒí’ˆ ìƒì„¸ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', error);
+        toast.error('ìƒí’ˆ ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
+      },
+    },
+  });
+};
eol ì˜¤ë¥˜ê°€ ìˆë„¤ìš¥! ğŸ‘€

â€”
Reply to this email directly, view it on GitHub, or unsubscribe.
You are receiving this because you authored the thread.

